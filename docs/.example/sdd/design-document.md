# 仕様駆動開発 設計ドキュメント

## Overview(概要)

仕様駆動開発(SDD)とは
- 仕様書を唯一の真実として扱う開発手法
- AIが仕様書を読み、コード生成とテスト実行を自動化
- コードは生成のたびに破棄可能な副産物
- 仕様書×AI×テストの3要素で品質を担保

目的
- 仕様書だけで全実装が完結する状態を目指す
- 人間は仕様書の作成とレビューに集中
- AIがコード生成、テスト、検証を担当

## BasicPhilosophy(基本思想)

コードは副産物
- コードは生成のたびに破棄する副産物として考える
- 考え方としてはバッチファイルや、Next.jsのコンパイルに近い
- /docsに仕様書を入れてAIに命令するだけで、全実装が行われることが目的
- バージョン管理の対象は仕様書のみ、コードは生成物

仕様が全て
- 仕様書が唯一の真実(Single Source of Truth)
- コードのドキュメント化ではなく、仕様書からのコード化
- 仕様書が完全であれば、何度でも同じコードを再現可能

## Architecture(アーキテクチャ)

責務分離
- フロントエンド: デザイン(ui)とロジック(features)を完全に分離
- ui-kit: デザインのみのコンポーネント、デザインシステムと1対1対応
  - 理由: デザイン変更時にロジックへの影響を防ぐ
  - 理由: デザイナーとの協業を容易にする
- ui-features: ロジック入りのコンポーネント
  - 理由: ui-kitの組み合わせで複雑なUIロジックを実現
- features: ビジネスロジック
  - 理由: UIから独立したテストを可能にする
- MVC、クリーンアーキテクチャなどの原則に従う

ディレクトリ構成
- 仕様ディレクトリ構成は実装と1対1で作る
- /docsと/srcのディレクトリ構成を対応させる
- 理由: 仕様書の場所から実装ファイルの場所が一意に決まる
- 理由: AIが仕様書からファイルパスを推測可能

## Scope(対応範囲)

- フロントエンドとバックエンドの開発に対応
- 新しいプロジェクト
- PoCが先行してるプロジェクト
- 古いプロジェクトのリファクタリング

## DocumentationRules(ドキュメント記述ルール)

対象
- specification.md: コンポーネント・機能の仕様書
- README.md: プロジェクト・ディレクトリの概要説明
- package.md: 使用パッケージ一覧
- その他全てのドキュメントファイル

簡潔に
- 実装コードより短く
- 箇条書き中心
- 強調マーク使用禁止
- 冗長な説明を避ける

具体的に
- 曖昧な表現禁止(「適度な」「良い感じに」「いい感じ」等)
- 数値を明示(「大きめ」→「48px」、「少し」→「2px」)
- 全ての状態・パターンを記載
- 条件分岐は具体的に記述

実用的に
- 人間が読んで理解して書き換えられること
- AIが読んで理解して実装に不足のない最低限の指示
- 過剰な詳細化は避け、必要十分な情報のみ記載

## TestCode(テストコード)

方針
- 最低限で良い
- ui-kit: 全パターンがreturnされる
- ロジック系: 最低限の正常系が通るだけで良い
- コンポーネントのみのテスト実行コマンドを作る

フレームワーク
- Jest: テストランナー
- React Testing Library: コンポーネントテスト
- テストファイル配置: {component}.test.tsx

コメント
- テストにもコードにも、ジュニアが見てわかるレベルのコメントアウトを入れる
- テストの目的を明記
- 期待値の理由を記載

## Showcase(ハリボテ)

表示
- localhostでアクセスした時のみ、ドロワーメニューにハリボテ一覧へのリンクが表示される
- 一覧から、コンポーネントのパーツ一覧や、各画面のハリボテ画面へリンク
  - トップページ: /showcase
  - ui-kit一覧: /showcase/ui-kit
  - ui-features一覧: /showcase/ui-features

実装
- ロジックがない見た目のみ
- 一部動作を再現するロジックを入れることもある
  - useState でインタラクション再現
  - モックデータでの動作確認
- ファイル配置: /src/app/showcase/{category}/{component}/page.tsx

## AssetManagement(アセット管理)

画像
- PNGやSVGは必要分全てをダウンロードし、/docsに入れる
- 必要に応じてコピーさせる

## VersionControl(バージョン管理)

仕様書
- 各specification.mdに更新日時とバージョン番号を記載
- 大きな変更時は/.old/にバックアップ

フォーマット
```
バージョン: v1.0.0
更新日: 2026-01-21
既存: src/components/...
```